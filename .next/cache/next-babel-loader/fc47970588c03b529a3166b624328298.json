{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { db } from '../lib/db';\nimport React from 'react';\nexport default class Posts extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"handleDelete\", id => {\n      console.log(id);\n    });\n  }\n\n  static async getInitialProps() {\n    // db.jsのfirebaseのDB接続ファンクション\n    // DBのpostsコレクション内を全て取得した結果 = result\n    let result = await new Promise((resolve, reject) => {\n      db.collection('posts').get().then(snapshot => {\n        let data = [];\n        snapshot.forEach(doc => {\n          data.push(Object.assign({\n            id: doc.id\n          }, doc.data()));\n        });\n        resolve(data);\n      }).catch(error => {\n        reject([]);\n      });\n    });\n    return {\n      posts: result\n    };\n  }\n\n  render() {\n    const posts = this.props.posts;\n    return __jsx(React.Fragment, null, posts.map(post => __jsx(\"div\", {\n      class: \"post\",\n      key: post.id,\n      className: \"jsx-2596614222\"\n    }, __jsx(\"h2\", {\n      className: \"jsx-2596614222\"\n    }, post.title), __jsx(\"p\", {\n      className: \"jsx-2596614222\"\n    }, post.body), __jsx(\"button\", {\n      onClick: this.handleDelete.bind(this, post.id),\n      className: \"jsx-2596614222\"\n    }, \"\\u524A\\u9664\"))), __jsx(_JSXStyle, {\n      id: \"2596614222\"\n    }, [\".post.jsx-2596614222{width:40%;border:1px solid black;background-color:gray;margin-bottom:10px;}\"]));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}